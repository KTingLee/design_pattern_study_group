[CK Patt #3] 單一職責原則（SRP）
===
一個人專心負責一件事好呢，還是一人分飾多角？

前言
---
單一職責原則是物件導向設計的一個重要的大原則。

> **單一職責原則(SRP):** 就一個類別而言，應該只有一個引起他變化的原因。

《大話設計模式》書中舉俄羅斯方塊遊戲的設計為例，若以 WinForm 撰寫基本需要建立一個 Form，加入一個控制項(Form.Control)，作為遊戲框，一個 Button 控制遊戲開始，最後需要 Timer 控制分時動畫，並監聽 Timer_Tick 事件來畫出每個時間點的遊戲畫面，監聽鍵盤事件來做方塊移動、旋轉等等。***(完全不用理解這段在講什麼，只需要知道這樣的實作方式把和介面有關跟和遊戲邏輯有關的程式碼寫在一起)***

一般傳統的程式設計概念下不會將功能分類獨立，可能用幾個全域變數控制當前的狀態，但如果今天想在其他平台上開發類似的遊戲，必須將所有程式碼複製並到另外一個平台上修改。

我們仔細觀察可以發現有某些部分是和平台無關的，例如下落、旋轉、碰撞判斷、移動等等，再仔細推敲可以發現我們可以將俄羅斯方塊的遊戲結構化成 n\*m 的二維矩陣，矩陣值為 0 表示沒有方塊、為 1 表示有方塊，透過更新矩陣的值可表達當前的遊戲狀態。

因此我們可以把俄羅斯方塊的遊戲邏輯和前端介面分離開來，此時**唯一引起這個類別變化的原因**就只有當我們想修改遊戲邏輯時，而修改其他東西時 (例如修改介面) 則與此類別無關，不需要更改該類別就可以直接複用，這就是單一職責原則。

將不同職責的功能包含在同一個類別裡面表示這些職責**耦合**了，將不同的功能分離成不同的類別則稱為**解耦合**，遵循 SRP 的好處，或說檢驗你的程式是否符合 SRP 的一個方式是，當你修改了某一個類別的實作，有多少不屬於這個類別的程式碼受到影響，受影響的類別越少表示耦合性越低。

作業
---
(續上篇) 學到了超屌招式之後 CK 繼續做戰鬥前的準備，他拿起可定位敵人位置的超智慧手機，但不幸的是裡面的雷達只能搜尋人類，根本偵測不到外星人，他想修改手機加裝外星人偵測模組，但是敵人雷達晶片焊死在手機上，如果要更換必須把手機拆了，還有可能弄壞他，想個辦法修改手機的設計讓下次 CK 如果遇到異次元怪物時不需要把手機拆了吧。

智慧手機設計如下，指出其未滿足 SRP 之處並重新設計符合 SRP 之系統。

![](https://i.imgur.com/2L8mDMy.png)